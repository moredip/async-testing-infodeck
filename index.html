<html>
  <head>
    <link rel="stylesheet" href="style.css"/>
  </head>
  <body>
    <article class='slide simple-sync-ajax'>
    <a name='simple-sync-ajax'/>
      <section class="narrative">
        <a href='#simple-sync-ajax'>
          <h1>a simple synchronous function</h1>
      </a>
        <p>We'll use an example of adding a new user to the system. We have a UserRegistrar who is responsible for adding a new user. It does that by asking the AJAX Service to make a POST request to the appropriate URL. Once the POST request completes we have successfully create a user, so the UserRegistrar also completes.
        </p>
        <p>If we were implementing this in synchronous code we'd probably end up with something along the lines of what is illustrated by this Sequence Diagram.
        </p>
        <ol>
          <li data-name='call-add-user'>
            someone calls UserRegistrar.addUser(...)
          </li>
          <li data-name='call-post'>
            addUser asks the AJAX service to make a post request
          </li>
          <li data-name='do-post'>
            the AJAX service does its thing
          </li>
          <li data-name='return-post'>
            the post request returns to UserRegistrar.addUser
          </li>
          <li data-name='return-add-user'>
            since the post completed, addUser then returns too
          </li>
        </ol>
      </section>

      <div class="diagram-container" data-diagram="simple-sync-ajax"/>
    </article>

    <article class='slide simple-sync-ajax-test'>
      <a name='simple-sync-ajax-test'/>
      <section class="narrative">
        <a href='#simple-sync-ajax-test'>
          <h1>testing a simple synchronous function</h1>
        </a>
        <p>
          Testing a straightforward synchronous function like this is pretty straight forward. As an example let's look at how we'd test that addUser is providing the right post parameters to the AJAX service's post function.
        </p><p>
          We can replace the real AJAX service with a test double, or fake implementation. This implementation won't actually make an AJAX call when its post function is called. Instead it will just make a note of which parameters were called and immediately return. This means that after the addUser function has completed the test can go and ask the fake AJAX service what parameters were passed to it, and thus verify that the expected parameters were indeed passed in.
        </p>
        <ol>
          <li data-name='send-post-params'>
            the UserRegistrar sends the post params to the fake AJAX service
          </li>
          <li data-name='lookup-post-params'>
            later, the test asks the fake ajax service for the post params which the UserRegistrar sent
          </li>
        </ol>
      </section>
      <div class="diagram-container" data-diagram="simple-sync-ajax-test"></div>
    </article>

    <article class='slide simple-async-ajax'>
    <a name='simple-async-ajax'/>
      <section class="narrative">
        <a href='#simple-async-ajax'>
          <h1>a simple asynchronous function</h1>
        </a>
        <p>
        For a long-running operation like a network call it's common to use an asynchronous approach. Rather than blocking on the result of the service call the caller can instead provide a <i>callback function</i> to the AJAX Service's post method. The AJAX Service will return immediately - before the actual network call is complete. When the network call does complete the AJAX Service will call the callback provided earlier.
        </p>
      </section>
      <div class="diagram-container" data-diagram="simple-async-ajax"/>
    </article>

    <script src="jquery-1.8.3.min.js"></script>
    <script src="d3.v3.min.js"></script>
    <script src="asevented.min.js"></script>
    <script type="text/coffeescript" src="animations.coffee"></script>
    <script src="coffee-script.js"></script>
  </body>
</html>
